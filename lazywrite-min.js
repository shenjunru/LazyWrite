/*! LazyWrite 1.2.1 (sha1: 4dad37cb515c671323bc5110f385585c39141301) | (c) 2011 Shen Junru. MIT License. | http://github.com/shenjunru/LazyWrite */
(function(e,t,n,r,i){"function"==typeof define&&define.amd?define(function(){return e(t,n,r,i,!1)}):n.LazyWrite=e(t,n,r,i,!1!==n.AUTO_LAZYWRITE)})(function(e,t,n,r,i,s){function D(e){N.errors.push(e)}function P(e,t){return e.appendChild(t)}function H(e){return e.parentNode?e.parentNode.removeChild(e):e}function B(e,t){return e.parentNode.replaceChild(t,e)&&t}function j(e){return n.createElement(e)}function F(){return j("span")}function I(e){var t=j("script");return t.type=e.type,e.src?t.src=e.src:t.text=e.text,t}function q(e,t,n){clearTimeout(n.timeout),n.done=!0,t.onerror=t[l]="",H(e),n===b&&(b=s,$())}function R(t,n){if(n.src){var i={src:n.src};n[l]=function(){var e=r&&n.readyState;!i.done&&(!e||c[e])&&(e==="loaded"&&!i.loaded?(i.loaded=!0,setTimeout(n[l])):q(t,n,i))},n.onerror=function(e){D(i.error=e),q(t,n,i)},setTimeout(function(){P(t,n)}),i.timeout=setTimeout(function(){D("unknow"),q(t,n,i)},60500),b=i}else{try{e(n.text.replace(h,""))}catch(s){D(s)}H(t)}}function U(e){if(e)return b||(w=e.holder),R(e.holder,e.script=I(e.script)),!e.script.src}function z(){for(var e;e=U(T.shift()););return e!==!1&&!b}function W(e,t,n){r?(y.innerHTML="<img />"+t,H(y.firstChild)):y.innerHTML=t;var i=[],s=y.getElementsByTagName("script"),o,u;while(s[0])i.push({script:s[0],holder:B(s[0],F())});while(y.firstChild)g.appendChild(y.firstChild);return E===e?(T=(u=T.n.slice(T.l-T.length).concat(i)).concat(o=T.o),T.n=u,T.o=o,S.parentNode.insertBefore(g,S)):(T=i.concat(o=T),T.n=i,T.o=o,S=g.appendChild(S||F()),n?e.parentNode.insertBefore(g,e.nextSibling):B(e,g)),T.l=T.length,E=e,k&&i.length&&(k=z()),k}function X(e){return e&&e.html&&W(n.getElementById(e.id),e.html)}function V(){while(X(N=x.shift()));k&&!x.length&&(S&&H(S),b=w=E=S=s,n.write=A,n.writeln=O,C=!1)}function $(){k=!0;if(z()){try{N.callback&&N.callback(N.errors)}catch(e){D(e)}V()}}function J(e,t,n){"function"!=typeof n&&(n=s),"function"==typeof t&&(n=t,t=s),t||_('<span id="'+(t=f+u++)+'"></span>'),x.push({id:t,html:e,callback:n,errors:[]})}function K(e){var t,n,r=p.exec(e);while(r){e=e.slice(r.index+r[0].length,e.length),n=r[1];if(d.test(n))r=p.exec(e);else{if(-1===(t=e.indexOf("</"+n+">")))return m=n;r=p.exec(e=e.slice(t+n.length+3))}}}function Q(e){return!m||-1!==e.indexOf("</"+m+">")}function G(){var e=L.call(arguments,"");if(e)if(K(e))v+=e;else if(Q(e)){e=v+e,m=v="";if(C)try{W(w,e,!0)}catch(t){D(t)}else J(e)}else v+=e}function Y(){n.writeln=n.write=G}var o,u=1,a="text/lazyjs",f="lazy-holder-",l=r?"onreadystatechange":"onload",c={complete:1,loaded:1},h=/^\s*<!--/,p=/<([a-z]+)(?:\s+[a-z]+(?:=(?:'[^']*'|"[^"]*"|[^'">\s]*))?)*\s*>/i,d=/area|base|br|col|frame|hr|img|input|link|meta|param/i,v="",m="",g=n.createDocumentFragment(),y=j("div"),b=s,w=s,E=s,S=s,x=[],T=[],N=s,C=!1,k=!0,L=[].join,A=n.write,O=n.writeln,M=t.onerror,_=A.apply?function(){A.apply(n,arguments)}:A;return t.onerror=function(e,n){b&&n===b.src&&!b.error&&D(e),M&&M.apply(t,arguments)},i&&Y(),o={write:_,prepare:Y,render:J,process:function(){if(C)return;C=!0,o.prepare(),V()},findScripts:function(e){e=e||a;var t=n.getElementsByTagName("script"),r=t.length-1,i=[],s,o,l;for(;-1<r;r--)e===t[r].type&&i.push(t[r]);for(;s=i.pop();){B(s,o=F());if(l=s.getAttribute("src"))P(y,j("script")).src=l;P(y,s),J(y.innerHTML,o.id=f+u++),y.innerHTML=""}}}},function(){eval.apply(window,arguments)},window,document,/*@cc_on!@*/!1);
